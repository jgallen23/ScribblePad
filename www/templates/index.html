<!DOCTYPE HTML>
<html>
	<head>
		<title>Recurring</title>
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, user-scalable = no, maximum-scale = 1.0">

		{% for file in css_files %}
		<link rel="stylesheet" type="text/css" href="{{ css_path }}/{{ file }}"/>
		{% endfor %}
		{% if remote %}
		<script src="http://{{ remote }}:8081/target/target-script.js"></script>
		{% endif %}
	</head>
	<body class="{% if debug %} Debug{% else %} Release{% endif %}">
		<div id="PageContainer">
			<div class="Sheets">
				<div class="Sheet"></div>
				{% include "scribble.html" %}
				{% include "view_all.html" %}
			</div>
		</div>
		{% if phonegap %}
			<script src="phonegap.js"></script>
			{% for file in phonegap_plugin_files %}
			<script src="{{ js_path }}/{{ file }}"></script>
			{% endfor %}
		{% endif %}
		{% for file in appui_files %}
		<script src="{{ appui_path }}/{{ file }}"></script>
		{% endfor %}
		{% for file in js_files %}
		<script src="{{ js_path }}/{{ file }}"></script>
		{% endfor %}
		<script>
			ui.ready(function() {
				ui.mobile.disableScrollingPermanently();
                //appController = new AppController();
				var controller = new ScribbleController('Scribble');
                /*
				persistence.store.websql.config(persistence, 'Recurring', 'RecurringDb', 5 * 1024 * 1024);
				persistence.schemaSync(function(tx) {
					new TaskListController('TaskList');
				});
                */ 
			});
			ui.resize(function(width, height) {
				/*
				console.log("resize");
				var toolbarHeight = parseInt(x$(".Toolbar").getStyle("height"), 10);
				var w = window.innerWidth - 10;
				var h = window.innerHeight - 5;
				x$(".Sheet").setStyle("width", w+"px");
				x$(".Sheet").setStyle("height", h+"px");

				x$("#ViewAll .container").setStyle("height", (h - toolbarHeight)+"px");
				*/
				var container = document.getElementById("PageContainer");
				container.style.width = width+"px";
				container.style.height = height+"px";
				ui.find(".Page [role='content']", function(elem) {
					elem.style.height = (height - 10)+"px";
					elem.style.width = (width - 10)+"px";
				});
			});
		</script>
	</body>
</html>
